{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function EmployeeList(){const[employees,setEmployees]=useState([]);const[searchTerm,setSearchTerm]=useState('');const[filteredEmployees,setFilteredEmployees]=useState([]);const[error,setError]=useState('');const[isLoading,setIsLoading]=useState(false);const navigate=useNavigate();useEffect(()=>{setIsLoading(true);// Fetch employees when the component mounts\naxios.get('http://localhost:3001/employees').then(response=>{setEmployees(response.data);setFilteredEmployees(response.data);// Set initial filtered employees\nsetError('');}).catch(err=>{console.error('Error fetching employee data:',err);setError('Failed to fetch employees');}).finally(()=>setIsLoading(false));},[]);useEffect(()=>{// Filter employees when the search term changes\nsetFilteredEmployees(employees.filter(employee=>{var _employee$EmployeeEma,_employee$Department;return employee.EmployeeName.toLowerCase().includes(searchTerm.toLowerCase())||employee.EmployeeID.toString().includes(searchTerm)||((_employee$EmployeeEma=employee.EmployeeEmail)===null||_employee$EmployeeEma===void 0?void 0:_employee$EmployeeEma.toLowerCase().includes(searchTerm.toLowerCase()))||((_employee$Department=employee.Department)===null||_employee$Department===void 0?void 0:_employee$Department.toLowerCase().includes(searchTerm.toLowerCase()));}));},[searchTerm,employees]);const handleDelete=id=>{if(window.confirm('Are you sure you want to delete this employee?')){axios.delete(`http://localhost:3001/employee/${id}`).then(()=>{setEmployees(employees.filter(employee=>employee.EmployeeID!==id));setFilteredEmployees(filteredEmployees.filter(employee=>employee.EmployeeID!==id));alert('Employee deleted successfully');}).catch(err=>{console.error('Error deleting employee:',err);alert('Failed to delete employee');});}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Employee List\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'20px'},children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by Employee ID, Name, Email, or Department\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),style:{padding:'10px',width:'400px',borderRadius:'5px',border:'1px solid #ccc'}})}),isLoading&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading employees...\"}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red'},children:error}),!isLoading&&!error&&filteredEmployees.length>0?/*#__PURE__*/_jsxs(\"table\",{border:\"1\",style:{width:'100%',borderCollapse:'collapse',marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Employee ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Employee Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Employee Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Department\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date of Joining\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredEmployees.map(employee=>{var _employee$DateOfJoini;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:employee.EmployeeID}),/*#__PURE__*/_jsx(\"td\",{children:employee.EmployeeName}),/*#__PURE__*/_jsx(\"td\",{children:employee.EmployeeEmail||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:employee.PhoneNumber}),/*#__PURE__*/_jsx(\"td\",{children:employee.Department}),/*#__PURE__*/_jsx(\"td\",{children:((_employee$DateOfJoini=employee.DateOfJoining)===null||_employee$DateOfJoini===void 0?void 0:_employee$DateOfJoini.split('T')[0])||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:employee.Role}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(`/edit-employee/${employee.EmployeeID}`),style:{marginRight:'10px'},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(employee.EmployeeID),style:{color:'red'},children:\"Delete\"})]})]},employee.EmployeeID);})})]}):!isLoading&&!error&&/*#__PURE__*/_jsx(\"div\",{children:\"No employees found\"})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","EmployeeList","employees","setEmployees","searchTerm","setSearchTerm","filteredEmployees","setFilteredEmployees","error","setError","isLoading","setIsLoading","navigate","get","then","response","data","catch","err","console","finally","filter","employee","_employee$EmployeeEma","_employee$Department","EmployeeName","toLowerCase","includes","EmployeeID","toString","EmployeeEmail","Department","handleDelete","id","window","confirm","delete","alert","children","style","marginBottom","type","placeholder","value","onChange","e","target","padding","width","borderRadius","border","color","length","borderCollapse","marginTop","map","_employee$DateOfJoini","PhoneNumber","DateOfJoining","split","Role","onClick","marginRight"],"sources":["D:/Projects/EmployeeManagement-master/EmployeeManagement-master/front-end/src/components/EmployeeList.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\n\nexport default function EmployeeList() {\n    const [employees, setEmployees] = useState([]);\n    const [searchTerm, setSearchTerm] = useState('');\n    const [filteredEmployees, setFilteredEmployees] = useState([]);\n    const [error, setError] = useState('');\n    const [isLoading, setIsLoading] = useState(false);\n\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        setIsLoading(true);\n        // Fetch employees when the component mounts\n        axios.get('http://localhost:3001/employees')\n            .then((response) => {\n                setEmployees(response.data);\n                setFilteredEmployees(response.data); // Set initial filtered employees\n                setError('');\n            })\n            .catch((err) => {\n                console.error('Error fetching employee data:', err);\n                setError('Failed to fetch employees');\n            })\n            .finally(() => setIsLoading(false));\n    }, []);\n\n    useEffect(() => {\n        // Filter employees when the search term changes\n        setFilteredEmployees(\n            employees.filter(\n                (employee) =>\n                    employee.EmployeeName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                    employee.EmployeeID.toString().includes(searchTerm) ||\n                    employee.EmployeeEmail?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                    employee.Department?.toLowerCase().includes(searchTerm.toLowerCase())\n            )\n        );\n    }, [searchTerm, employees]);\n\n    const handleDelete = (id) => {\n        if (window.confirm('Are you sure you want to delete this employee?')) {\n            axios.delete(`http://localhost:3001/employee/${id}`)\n                .then(() => {\n                    setEmployees(employees.filter((employee) => employee.EmployeeID !== id));\n                    setFilteredEmployees(filteredEmployees.filter((employee) => employee.EmployeeID !== id));\n                    alert('Employee deleted successfully');\n                })\n                .catch((err) => {\n                    console.error('Error deleting employee:', err);\n                    alert('Failed to delete employee');\n                });\n        }\n    };\n\n    return (\n        <div>\n            <h2>Employee List</h2>\n\n            {/* Search Input */}\n            <div style={{ marginBottom: '20px' }}>\n                <input\n                    type=\"text\"\n                    placeholder=\"Search by Employee ID, Name, Email, or Department\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    style={{\n                        padding: '10px',\n                        width: '400px',\n                        borderRadius: '5px',\n                        border: '1px solid #ccc',\n                    }}\n                />\n            </div>\n\n            {/* Loading State */}\n            {isLoading && <div>Loading employees...</div>}\n\n            {/* Error Message */}\n            {error && <div style={{ color: 'red' }}>{error}</div>}\n\n            {/* Employee Table */}\n            {!isLoading && !error && filteredEmployees.length > 0 ? (\n                <table border=\"1\" style={{ width: '100%', borderCollapse: 'collapse', marginTop: '20px' }}>\n                    <thead>\n                        <tr>\n                            <th>Employee ID</th>\n                            <th>Employee Name</th>\n                            <th>Employee Email</th>\n                            <th>Phone Number</th>\n                            <th>Department</th>\n                            <th>Date of Joining</th>\n                            <th>Role</th>\n                            <th>Actions</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {filteredEmployees.map((employee) => (\n                            <tr key={employee.EmployeeID}>\n                                <td>{employee.EmployeeID}</td>\n                                <td>{employee.EmployeeName}</td>\n                                <td>{employee.EmployeeEmail || 'N/A'}</td>\n                                <td>{employee.PhoneNumber}</td>\n                                <td>{employee.Department}</td>\n                                <td>{employee.DateOfJoining?.split('T')[0] || 'N/A'}</td>\n                                <td>{employee.Role}</td>\n                                <td>\n                                    <button\n                                        onClick={() => navigate(`/edit-employee/${employee.EmployeeID}`)}\n                                        style={{ marginRight: '10px' }}\n                                    >\n                                        Edit\n                                    </button>\n                                    <button\n                                        onClick={() => handleDelete(employee.EmployeeID)}\n                                        style={{ color: 'red' }}\n                                    >\n                                        Delete\n                                    </button>\n                                </td>\n                            </tr>\n                        ))}\n                    </tbody>\n                </table>\n            ) : (\n                !isLoading &&\n                !error && <div>No employees found</div>\n            )}\n        </div>\n    );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,cAAe,SAAS,CAAAC,YAAYA,CAAA,CAAG,CACnC,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACU,UAAU,CAAEC,aAAa,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACY,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAC9D,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACgB,SAAS,CAAEC,YAAY,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CAEjD,KAAM,CAAAkB,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAE9BH,SAAS,CAAC,IAAM,CACZkB,YAAY,CAAC,IAAI,CAAC,CAClB;AACAhB,KAAK,CAACkB,GAAG,CAAC,iCAAiC,CAAC,CACvCC,IAAI,CAAEC,QAAQ,EAAK,CAChBZ,YAAY,CAACY,QAAQ,CAACC,IAAI,CAAC,CAC3BT,oBAAoB,CAACQ,QAAQ,CAACC,IAAI,CAAC,CAAE;AACrCP,QAAQ,CAAC,EAAE,CAAC,CAChB,CAAC,CAAC,CACDQ,KAAK,CAAEC,GAAG,EAAK,CACZC,OAAO,CAACX,KAAK,CAAC,+BAA+B,CAAEU,GAAG,CAAC,CACnDT,QAAQ,CAAC,2BAA2B,CAAC,CACzC,CAAC,CAAC,CACDW,OAAO,CAAC,IAAMT,YAAY,CAAC,KAAK,CAAC,CAAC,CAC3C,CAAC,CAAE,EAAE,CAAC,CAENlB,SAAS,CAAC,IAAM,CACZ;AACAc,oBAAoB,CAChBL,SAAS,CAACmB,MAAM,CACXC,QAAQ,OAAAC,qBAAA,CAAAC,oBAAA,OACL,CAAAF,QAAQ,CAACG,YAAY,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACvB,UAAU,CAACsB,WAAW,CAAC,CAAC,CAAC,EACtEJ,QAAQ,CAACM,UAAU,CAACC,QAAQ,CAAC,CAAC,CAACF,QAAQ,CAACvB,UAAU,CAAC,IAAAmB,qBAAA,CACnDD,QAAQ,CAACQ,aAAa,UAAAP,qBAAA,iBAAtBA,qBAAA,CAAwBG,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACvB,UAAU,CAACsB,WAAW,CAAC,CAAC,CAAC,KAAAF,oBAAA,CACxEF,QAAQ,CAACS,UAAU,UAAAP,oBAAA,iBAAnBA,oBAAA,CAAqBE,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACvB,UAAU,CAACsB,WAAW,CAAC,CAAC,CAAC,GAC7E,CACJ,CAAC,CACL,CAAC,CAAE,CAACtB,UAAU,CAAEF,SAAS,CAAC,CAAC,CAE3B,KAAM,CAAA8B,YAAY,CAAIC,EAAE,EAAK,CACzB,GAAIC,MAAM,CAACC,OAAO,CAAC,gDAAgD,CAAC,CAAE,CAClExC,KAAK,CAACyC,MAAM,CAAC,kCAAkCH,EAAE,EAAE,CAAC,CAC/CnB,IAAI,CAAC,IAAM,CACRX,YAAY,CAACD,SAAS,CAACmB,MAAM,CAAEC,QAAQ,EAAKA,QAAQ,CAACM,UAAU,GAAKK,EAAE,CAAC,CAAC,CACxE1B,oBAAoB,CAACD,iBAAiB,CAACe,MAAM,CAAEC,QAAQ,EAAKA,QAAQ,CAACM,UAAU,GAAKK,EAAE,CAAC,CAAC,CACxFI,KAAK,CAAC,+BAA+B,CAAC,CAC1C,CAAC,CAAC,CACDpB,KAAK,CAAEC,GAAG,EAAK,CACZC,OAAO,CAACX,KAAK,CAAC,0BAA0B,CAAEU,GAAG,CAAC,CAC9CmB,KAAK,CAAC,2BAA2B,CAAC,CACtC,CAAC,CAAC,CACV,CACJ,CAAC,CAED,mBACIrC,KAAA,QAAAsC,QAAA,eACIxC,IAAA,OAAAwC,QAAA,CAAI,eAAa,CAAI,CAAC,cAGtBxC,IAAA,QAAKyC,KAAK,CAAE,CAAEC,YAAY,CAAE,MAAO,CAAE,CAAAF,QAAA,cACjCxC,IAAA,UACI2C,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,mDAAmD,CAC/DC,KAAK,CAAEvC,UAAW,CAClBwC,QAAQ,CAAGC,CAAC,EAAKxC,aAAa,CAACwC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC/CJ,KAAK,CAAE,CACHQ,OAAO,CAAE,MAAM,CACfC,KAAK,CAAE,OAAO,CACdC,YAAY,CAAE,KAAK,CACnBC,MAAM,CAAE,gBACZ,CAAE,CACL,CAAC,CACD,CAAC,CAGLxC,SAAS,eAAIZ,IAAA,QAAAwC,QAAA,CAAK,sBAAoB,CAAK,CAAC,CAG5C9B,KAAK,eAAIV,IAAA,QAAKyC,KAAK,CAAE,CAAEY,KAAK,CAAE,KAAM,CAAE,CAAAb,QAAA,CAAE9B,KAAK,CAAM,CAAC,CAGpD,CAACE,SAAS,EAAI,CAACF,KAAK,EAAIF,iBAAiB,CAAC8C,MAAM,CAAG,CAAC,cACjDpD,KAAA,UAAOkD,MAAM,CAAC,GAAG,CAACX,KAAK,CAAE,CAAES,KAAK,CAAE,MAAM,CAAEK,cAAc,CAAE,UAAU,CAAEC,SAAS,CAAE,MAAO,CAAE,CAAAhB,QAAA,eACtFxC,IAAA,UAAAwC,QAAA,cACItC,KAAA,OAAAsC,QAAA,eACIxC,IAAA,OAAAwC,QAAA,CAAI,aAAW,CAAI,CAAC,cACpBxC,IAAA,OAAAwC,QAAA,CAAI,eAAa,CAAI,CAAC,cACtBxC,IAAA,OAAAwC,QAAA,CAAI,gBAAc,CAAI,CAAC,cACvBxC,IAAA,OAAAwC,QAAA,CAAI,cAAY,CAAI,CAAC,cACrBxC,IAAA,OAAAwC,QAAA,CAAI,YAAU,CAAI,CAAC,cACnBxC,IAAA,OAAAwC,QAAA,CAAI,iBAAe,CAAI,CAAC,cACxBxC,IAAA,OAAAwC,QAAA,CAAI,MAAI,CAAI,CAAC,cACbxC,IAAA,OAAAwC,QAAA,CAAI,SAAO,CAAI,CAAC,EAChB,CAAC,CACF,CAAC,cACRxC,IAAA,UAAAwC,QAAA,CACKhC,iBAAiB,CAACiD,GAAG,CAAEjC,QAAQ,OAAAkC,qBAAA,oBAC5BxD,KAAA,OAAAsC,QAAA,eACIxC,IAAA,OAAAwC,QAAA,CAAKhB,QAAQ,CAACM,UAAU,CAAK,CAAC,cAC9B9B,IAAA,OAAAwC,QAAA,CAAKhB,QAAQ,CAACG,YAAY,CAAK,CAAC,cAChC3B,IAAA,OAAAwC,QAAA,CAAKhB,QAAQ,CAACQ,aAAa,EAAI,KAAK,CAAK,CAAC,cAC1ChC,IAAA,OAAAwC,QAAA,CAAKhB,QAAQ,CAACmC,WAAW,CAAK,CAAC,cAC/B3D,IAAA,OAAAwC,QAAA,CAAKhB,QAAQ,CAACS,UAAU,CAAK,CAAC,cAC9BjC,IAAA,OAAAwC,QAAA,CAAK,EAAAkB,qBAAA,CAAAlC,QAAQ,CAACoC,aAAa,UAAAF,qBAAA,iBAAtBA,qBAAA,CAAwBG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAI,KAAK,CAAK,CAAC,cACzD7D,IAAA,OAAAwC,QAAA,CAAKhB,QAAQ,CAACsC,IAAI,CAAK,CAAC,cACxB5D,KAAA,OAAAsC,QAAA,eACIxC,IAAA,WACI+D,OAAO,CAAEA,CAAA,GAAMjD,QAAQ,CAAC,kBAAkBU,QAAQ,CAACM,UAAU,EAAE,CAAE,CACjEW,KAAK,CAAE,CAAEuB,WAAW,CAAE,MAAO,CAAE,CAAAxB,QAAA,CAClC,MAED,CAAQ,CAAC,cACTxC,IAAA,WACI+D,OAAO,CAAEA,CAAA,GAAM7B,YAAY,CAACV,QAAQ,CAACM,UAAU,CAAE,CACjDW,KAAK,CAAE,CAAEY,KAAK,CAAE,KAAM,CAAE,CAAAb,QAAA,CAC3B,QAED,CAAQ,CAAC,EACT,CAAC,GArBAhB,QAAQ,CAACM,UAsBd,CAAC,EACR,CAAC,CACC,CAAC,EACL,CAAC,CAER,CAAClB,SAAS,EACV,CAACF,KAAK,eAAIV,IAAA,QAAAwC,QAAA,CAAK,oBAAkB,CAAK,CACzC,EACA,CAAC,CAEd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}